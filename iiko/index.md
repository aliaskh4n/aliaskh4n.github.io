# iiko API Manager

![iiko API Manager](https://via.placeholder.com/800x400?text=iiko+API+Manager)

## О проекте

**iiko API Manager** — это веб-приложение для безопасного управления API-ключами, обеспечивающее интеграцию внешних сервисов с системой iiko. Проект разработан как дипломная работа и представляет собой полноценное решение для предприятий, использующих iiko и нуждающихся в безопасном API-доступе к своим данным.

### Основные проблемы, которые решает проект

1. **Безопасность API-доступа** — централизованное управление ключами доступа к API iiko
2. **Отсутствие контроля** — невозможность отслеживать использование API-ключей
3. **Сложность интеграции** — трудности при подключении внешних сервисов к iiko
4. **Отсутствие аналитики** — невозможность анализировать использование API
5. **Ручное управление** — необходимость вручную создавать и управлять ключами

### Преимущества решения

- **Централизованное управление** — все API-ключи в одном месте
- **Безопасность** — современные методы шифрования и хранения ключей
- **Мониторинг** — отслеживание использования API-ключей в реальном времени
- **Аналитика** — визуализация данных о посещениях и использовании API
- **Удобный интерфейс** — интуитивно понятный дашборд для управления ключами
- **Масштабируемость** — возможность добавления новых функций и интеграций

## Технологии

### Backend
- **Python 3.13** — основной язык программирования
- **Flask** — легковесный веб-фреймворк
- **SQLAlchemy** — ORM для работы с базой данных
- **Flask-Login** — управление аутентификацией пользователей
- **Werkzeug** — утилиты для веб-приложений (хеширование паролей)

### Frontend
- **HTML5/CSS3** — разметка и стили
- **Bootstrap 5** — фреймворк для создания адаптивного интерфейса
- **JavaScript** — клиентская логика
- **Chart.js** — библиотека для создания интерактивных графиков
- **Font Awesome** — иконки

### База данных
- **SQLite** — легковесная встраиваемая база данных

## Функциональность

### Для пользователей
- Регистрация и аутентификация
- Создание, просмотр, деактивация и удаление API-ключей
- Просмотр статистики использования API
- Мониторинг активности ключей

### Для администраторов
- Управление пользователями
- Просмотр общей статистики
- Мониторинг системы

## Установка и запуск

### Предварительные требования
- Python 3.13 или выше
- pip (менеджер пакетов Python)

### Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/iiko-api-manager.git
cd iiko-api-manager
```

2. Создайте виртуальное окружение и активируйте его:
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/Mac
python3 -m venv venv
source venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

### Запуск приложения

1. Запустите Flask-приложение:
```bash
python app.py
```

2. Откройте браузер и перейдите по адресу:
```
http://127.0.0.1:3000
```

## Структура проекта

```
iiko-api-manager/
├── app.py                  # Основной файл приложения
├── models.py               # Модели данных (SQLAlchemy)
├── routes.py               # API-маршруты
├── utils.py                # Вспомогательные функции
├── requirements.txt        # Зависимости проекта
├── static/                 # Статические файлы
│   ├── css/                # CSS-стили
│   └── js/                 # JavaScript-файлы
│       └── api.js          # Скрипты для работы с API
└── templates/              # HTML-шаблоны
    ├── base.html           # Базовый шаблон
    ├── index.html          # Главная страница
    ├── login.html          # Страница входа
    ├── register.html       # Страница регистрации
    └── dashboard.html      # Панель управления
```

## Модели данных

### User
- id (Integer, Primary Key)
- username (String, Unique)
- email (String, Unique)
- password_hash (String)
- created_at (DateTime)
- api_keys (Relationship)

### APIKey
- id (Integer, Primary Key)
- key (String, Unique)
- name (String)
- user_id (Integer, Foreign Key)
- created_at (DateTime)
- last_used (DateTime)
- is_active (Boolean)

### PageView
- id (Integer, Primary Key)
- page (String)
- user_id (Integer, Foreign Key)
- timestamp (DateTime)
- ip_address (String)
- user_agent (String)

## API Endpoints

### Аутентификация
- `POST /register` — регистрация нового пользователя
- `POST /login` — вход в систему
- `GET /logout` — выход из системы

### API-ключи
- `GET /api/keys` — получение списка API-ключей
- `POST /api/keys` — создание нового API-ключа
- `POST /api/deactivate_key/<key_id>` — деактивация API-ключа
- `POST /api/delete_key/<key_id>` — удаление API-ключа

### Статистика
- `POST /api/track_pageview` — отслеживание посещений страниц
- `GET /api/pageview_stats` — получение статистики посещений

## Безопасность

- Пароли хешируются с использованием Werkzeug
- API-ключи генерируются с использованием криптографически безопасного генератора
- Все запросы к API требуют аутентификации
- Защита от CSRF-атак
- Безопасное хранение сессий

## Дальнейшее развитие

- Интеграция с системой iiko
- Добавление вебхуков для уведомлений
- Расширенная аналитика использования API
- Мобильное приложение
- Интеграция с системами мониторинга

## Лицензия

MIT

## Автор

Ваше имя

---

*Этот проект разработан как дипломная работа и не является официальным продуктом компании iiko.* 
