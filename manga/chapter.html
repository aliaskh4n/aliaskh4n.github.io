// Навигация по главам свайпами
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener("touchstart", (e) => {
  touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener("touchend", (e) => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  const deltaX = touchEndX - touchStartX;

  // Свайп вправо → следующая глава
  if (deltaX > 50) {
    goToChapter("next");
  }

  // Свайп влево → предыдущая глава
  if (deltaX < -50) {
    goToChapter("prev");
  }
}

function goToChapter(direction) {
  const params = new URLSearchParams(window.location.search);
  const mangaId = params.get("manga");
  let chapterId = parseInt(params.get("chapter"));

  if (!mangaId || !chapterId) return;

  if (direction === "next") {
    chapterId++;
  } else if (direction === "prev" && chapterId > 1) {
    chapterId--;
  }

  // Загружаем новую главу
  window.location.href = `chapter.html?manga=${mangaId}&chapter=${chapterId}`;
}
